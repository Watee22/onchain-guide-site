<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模拟实战 - 链上交易 101</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo">链上交易 101</a>
            <div class="nav-links">
                <a href="setup.html">1. 钱包设置</a>
                <a href="trading.html">2. 开始交易</a>
                <a href="security.html">3. 安全提示</a>
                <a href="simulation.html" class="active">4. 模拟实战 (高级)</a>
            </div>
        </nav>
    </header>

    <main>
        <h1>链上操作模拟器 (高级版)</h1>
        <p>在这里，你可以体验真实的多链环境：管理 Gas 费、跨链桥接资产、以及在 Base 等 Layer 2 网络上操作。</p>

        <!-- 1. Wallet Display (Me & Friend) -->
        <div class="dashboard-grid">
            <!-- My Wallet -->
            <div class="card sim-card">
                <h2>🔐 我的钱包 (My Wallet)</h2>
                
                <div class="action-row" style="margin-bottom: 1rem;">
                    <button id="createWalletBtn" class="cta-button sim-btn small">生成/重置钱包</button>
                </div>

                <!-- Hidden Details (Shown after Generate) -->
                <div id="walletDetails" class="result-box hidden" style="background: #f8fafc; border: 1px solid #e2e8f0; color: #334155;">
                    <div class="detail-group">
                        <h4>🔐 助记词 (Mnemonic Phrase)</h4>
                        <p class="mnemonic-text" id="mnemonicDisplay" style="background: #e2e8f0; padding: 0.5rem; border-radius: 4px; font-family: monospace; margin: 0.5rem 0;">---</p>
                        <p style="color: #ef4444; font-weight: bold; font-size: 0.9rem;">⚠️ 严禁截图或告诉他人！拥有助记词 = 拥有资产所有权。</p>
                    </div>
                    <div class="detail-group" style="margin-top: 1rem;">
                        <h4>📫 模拟地址 (Addresses)</h4>
                        <p><strong>ETH/Base:</strong> <span id="ethAddress" style="color: #2563eb; font-family: monospace;">0x...</span></p>
                        <p><strong>Tron:</strong> <span id="tronAddress" style="color: #2563eb; font-family: monospace;">T...</span></p>
                        <p><strong>Solana:</strong> <span id="solAddress" style="color: #2563eb; font-family: monospace;">...</span></p>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 1rem;">
                    <h4>💰 资产余额 (Balances)</h4>
                    <ul id="myBalanceList" class="balance-list">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </div>

            <!-- Friend's Wallet -->
            <div class="card sim-card friend-card">
                <h2>👤 朋友的钱包 (Friend's View)</h2>
                <div class="info-box">
                    <h4>💰 朋友的资产</h4>
                    <ul id="friendBalanceList" class="balance-list">
                        <!-- Populated by JS -->
                    </ul>
                </div>
                <p class="hint-text">* 当你转账给朋友时，这里的余额会增加。</p>
            </div>
        </div>

        <!-- 2. Gas Station -->
        <div class="card sim-card gas-station">
            <h2>⛽ Gas 加油站 (Gas Station)</h2>
            <p><strong>关键知识点：</strong> 在任何链上交易都需要支付“路费”(Gas)。<br>
            - 以太坊链需要 <strong>ETH</strong><br>
            - 波场链需要 <strong>TRX</strong><br>
            - Solana 链需要 <strong>SOL</strong><br>
            - Base 链需要 <strong>ETH (Base)</strong></p>
            
            <div class="sim-form inline-form">
                <div class="form-group">
                    <label>购买网络 (Buy Gas For):</label>
                    <select id="gasNetwork">
                        <option value="ethereum">Ethereum (ETH)</option>
                        <option value="tron">Tron (TRX)</option>
                        <option value="solana">Solana (SOL)</option>
                        <option value="base">Base (ETH)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>花费 USDT (Cost):</label>
                    <input type="number" id="gasCostUsdt" value="10" min="1">
                </div>
                <button id="buyGasBtn" class="cta-button sim-btn">购买 Gas</button>
            </div>
            <div id="gasResult" class="result-box hidden"></div>
        </div>

        <!-- 3. Cross-Chain Bridge -->
        <div class="card sim-card bridge-section">
            <h2>🌉 跨链桥 (Cross-Chain Bridge)</h2>
            <p>不同区块链是“平行宇宙”，资产不能直接互通。你需要<strong>跨链桥</strong>来搬运资产。</p>
            <p class="fee-hint">手续费：每次跨链收取 <strong>1 USDT</strong> + 目标链 Gas 费。</p>

            <div class="sim-form">
                <div class="bridge-row">
                    <div class="form-group">
                        <label>从 (From):</label>
                        <select id="bridgeFromNet">
                            <option value="ethereum">Ethereum</option>
                            <option value="tron">Tron</option>
                            <option value="solana">Solana</option>
                            <option value="base">Base</option>
                        </select>
                    </div>
                    <div class="arrow">➡️</div>
                    <div class="form-group">
                        <label>到 (To):</label>
                        <select id="bridgeToNet">
                            <option value="base" selected>Base</option>
                            <option value="ethereum">Ethereum</option>
                            <option value="tron">Tron</option>
                            <option value="solana">Solana</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>跨链资产 (Asset):</label>
                    <select id="bridgeAsset">
                        <option value="usdt">USDT</option>
                        <!-- Future: Add ETH, etc. -->
                    </select>
                </div>

                <div class="form-group">
                    <label>数量 (Amount):</label>
                    <input type="number" id="bridgeAmount" value="100">
                </div>

                <button id="bridgeBtn" class="cta-button sim-btn bridge-btn">开始跨链 (Bridge)</button>
            </div>
            <div id="bridgeResult" class="result-box hidden"></div>
        </div>

        <!-- 4. P2P Transaction Simulation -->
        <div class="card sim-card">
            <h2>4. 模拟转账 (Send to Friend)</h2>
            <p>尝试转账给朋友。<strong>注意检查你的 Gas 余额！</strong></p>

            <div class="sim-form">
                <div class="form-group">
                    <label>选择资产 (Asset):</label>
                    <select id="sendAsset">
                        <option value="usdt-trc">USDT (Tron)</option>
                        <option value="usdt-eth">USDT (Ethereum)</option>
                        <option value="usdt-sol">USDT (Solana)</option>
                        <option value="usdt-base">USDT (Base)</option>
                        <option value="eth">ETH (Ethereum)</option>
                        <option value="sol">SOL (Solana)</option>
                        <option value="eth-base">ETH (Base)</option>
                        <option value="trx">TRX (Tron)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>接收方 (Recipient):</label>
                    <select id="recvPerson">
                        <option value="friend">朋友 (Friend)</option>
                        <option value="merchant">商家 (Merchant)</option>
                        <option value="other">其他地址 (Other)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>接收网络 (Target Network):</label>
                    <select id="targetNetwork">
                        <option value="tron">Tron (TRC20)</option>
                        <option value="solana">Solana</option>
                        <option value="ethereum">Ethereum (ERC20)</option>
                        <option value="base">Base (L2)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>金额 (Amount):</label>
                    <input type="number" id="sendAmount" placeholder="0.0" value="50">
                </div>

                <button id="sendBtn" class="cta-button sim-btn">确认发送</button>
            </div>

            <div id="txResult" class="result-box hidden"></div>
        </div>

    </main>

    <footer>
        <p>© 2024 On-Chain Trading 101. 模拟器资金均为虚拟，仅供教学。</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
